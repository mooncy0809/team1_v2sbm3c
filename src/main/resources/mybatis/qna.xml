<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="dev.mvc.qna.QnaDAOInter">
  <insert id="create" parameterType="dev.mvc.qna.QnaVO">
    INSERT INTO qna(qnano, categrpno, memberno, title, content, pwd, rdate)
    VALUES(qna_seq.nextval, #{categrpno}, #{memberno}, #{title}, #{content}, #{pwd}, sysdate)
  </insert> 
  
   <select id="list_all" resultType="dev.mvc.qna.QnaVO">
    SELECT qnano, categrpno, memberno,  title, content, pwd, rdate
    FROM qna
    ORDER BY rdate DESC
  </select>
  
    <select id="read" resultType="dev.mvc.qna.QnaVO" parameterType="int">
    SELECT qnano, categrpno, memberno, title, content, pwd, rdate
    FROM qna
    WHERE qnano = #{qnano}
    </select>
    
    <update id="update" parameterType="dev.mvc.qna.QnaVO">
    UPDATE qna 
    SET title=#{title}, content=#{content}, pwd=#{pwd}
    WHERE qnano=#{qnano}
    </update>
    

  <select id="member_join" resultType="dev.mvc.qna.Member_QnaVO">
    SELECT m.memberno as m_memberno, m.id as m_id,
               q.qnano, q.title, q.content, q.pwd, q.rdate
    FROM member m, qna q
    WHERE m.memberno = q.memberno
    ORDER BY rdate DESC
  </select>
  
  <delete id="delete" parameterType="int">
    DELETE FROM qna
    WHERE qnano = #{qnano}
  </delete>  
  
  <select id="passwd_check" resultType="int" parameterType="HashMap">
    SELECT count(*) as cnt
    FROM qna
    WHERE qnano=#{qnano} and pwd=#{pwd}
  </select>
  
  
  <!-- <select id="password"  resultType="int" parameterType="Map">
  </update> -->
  
  
 </mapper>
  